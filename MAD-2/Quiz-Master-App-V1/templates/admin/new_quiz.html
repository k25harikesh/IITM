{% extends 'admin/admin_base.html' %}

{% block title %}{% if quiz %}Edit Quiz{% else %}Add Quiz{% endif %}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="text-center">{% if quiz %}Edit Quiz{% else %}Create New Quiz{% endif %}</h2>
  
  <form method="POST" action="{% if quiz %}{{ url_for('edit_quiz', quiz_id=quiz.id) }}{% else %}{{ url_for('add_quiz') }}{% endif %}">
    <div class="mb-3">
      <label for="chapter_name" class="form-label">Enter Chapter Name</label>
      <input type="text" class="form-control" id="chapter_name" name="chapter_name" value="{{ quiz.chapter.name if quiz else '' }}">
    </div>
    
    <div class="mb-3">
      <label for="date" class="form-label">Quiz Date</label>
      <input type="date" class="form-control" id="date" name="date" value="{{ quiz.date.strftime('%Y-%m-%d') if quiz else '' }}" required>
    </div>
    
    <div class="mb-3">
      <label for="duration" class="form-label">Duration (minutes)</label>
      <input type="number" class="form-control" id="duration" name="duration" value="{{ quiz.duration if quiz else '' }}" min="1" required>
    </div>
    
    <div class="text-center">
      <button type="submit" class="btn btn-primary">{% if quiz %}Update Quiz{% else %}Create Quiz{% endif %}</button>
      <a href="{{ url_for('quiz') }}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>

  {% if quiz %}
  <div class="text-center mt-3">
    <form method="POST" action="{{ url_for('delete_quiz', quiz_id=quiz.id) }}" onsubmit="return confirm('Are you sure you want to delete this quiz?');">
      <button type="submit" class="btn btn-danger">Delete Quiz</button>
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}
